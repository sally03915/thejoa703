■ Request
--- 
```java
// src/main/java/com/thejoa703/dto/request/BlockRequestDto.java
package com.thejoa703.dto.request;

import jakarta.validation.constraints.NotNull;
import lombok.*;

@Getter @Setter @NoArgsConstructor @AllArgsConstructor
public class BlockRequestDto {
    @NotNull
    private Long targetUserId; // 차단/해제 대상 사용자
    @NotNull
    private Boolean blocked;   // true=차단, false=해제
}

```

```java
// CommentRequestDto.java
package com.thejoa703.dto.request;

import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.NotNull;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

/**
 * 댓글 요청 DTO
 */
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class CommentRequestDto {
    @NotNull
    private Long postId;

    @NotBlank
    private String content;
}

```

```java
package com.thejoa703.dto.request;

import lombok.Getter;
import lombok.Setter;

//DeptUserUpdateRequestDto.java
@Getter
@Setter
public class DeptUserUpdateRequestDto {
 private String dname;
 private String loc;

 // getter, setter
}

```

```java
// src/main/java/com/thejoa703/dto/request/FollowRequestDto.java
package com.thejoa703.dto.request;

import jakarta.validation.constraints.NotNull;
import lombok.*;

@Getter @Setter @NoArgsConstructor @AllArgsConstructor
public class FollowRequestDto {
    @NotNull
    private Long followeeId;
}

```

```java
// LikeRequestDto.java
package com.thejoa703.dto.request;

import jakarta.validation.constraints.NotNull;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

/**
 * 좋아요 요청 DTO
 */
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class LikeRequestDto {
    @NotNull
    private Long postId;
}

```

```java
package com.thejoa703.dto.request;

import jakarta.validation.constraints.Email;
import jakarta.validation.constraints.NotBlank;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

/**
 * 로그인 요청 DTO
 * - 이메일, 비밀번호, provider("local" 기본)
 */
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class LoginRequest {
    @Email
    @NotBlank
    private String email;

    @NotBlank
    private String password; // 평문 입력 → 서비스에서 BCrypt matches로 검증

    private String provider; // "local"
}

```


```java
// PostRequestDto.java
package com.thejoa703.dto.request;

import jakarta.validation.constraints.NotBlank;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

/**
 * 게시글 요청 DTO
 */
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class PostRequestDto {
    @NotBlank
    private String content;

    // 실제 업로드는 MultipartFile로 처리하므로 imageUrls는 제거하거나 설명 추가
    // private List<String> imageUrls;

    private String hashtags;   // ✅ 해시태그를 "#tag1,#tag2" 형태의 문자열로 받음
}

```

```java
// RetweetRequestDto.java
package com.thejoa703.dto.request;

import jakarta.validation.constraints.NotNull;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

/**
 * 리트윗 요청 DTO
 */
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class RetweetRequestDto {
    @NotNull
    private Long originalPostId;
}

```

```java
package com.thejoa703.dto.request;

import jakarta.validation.constraints.Email;
import jakarta.validation.constraints.NotBlank;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

/**
 * 회원가입 요청 DTO
 * - 이메일, 비밀번호, 닉네임, provider("local" 기본)
 * - Controller에서 @Valid로 유효성 검사
 */
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class UserRequestDto {
    @Email
    @NotBlank
    private String email;

    @NotBlank
    private String password; // 평문 입력 → 서비스에서 BCrypt 해시 저장

    @NotBlank
    private String nickname;

    private String provider; // "local" 기본
}

```

■ Response
--- 
```java
// src/main/java/com/thejoa703/dto/response/BlockResponseDto.java
package com.thejoa703.dto.response;

import lombok.AllArgsConstructor;
import lombok.Getter;

@Getter @AllArgsConstructor
public class BlockResponseDto {
    private Long blockerId;
    private Long blockedUserId;
    private boolean blocked;
}

```

```java
// CommentResponseDto.java
package com.thejoa703.dto.response;

import lombok.Builder;
import lombok.Getter;
import java.time.LocalDateTime;

@Getter
@Builder
public class CommentResponseDto {
    private Long id;
    private String content;
    private String authorNickname;
    private LocalDateTime createdAt;
}

```

```java
package com.thejoa703.dto.response;

import lombok.Getter;
import lombok.Setter;

//DeptUserUpdateRequestDto.java
@Getter
@Setter
public class DeptUserUpdateReponseDto {
 private String dname;
 private String loc;

 // getter, setter
}

```

```java
// src/main/java/com/thejoa703/dto/response/FollowResponseDto.java
package com.thejoa703.dto.response;

import java.time.LocalDateTime;
import com.thejoa703.entity.AppUser;
import com.thejoa703.entity.Follow;
import lombok.Getter;
import lombok.NoArgsConstructor;

@Getter @NoArgsConstructor
public class FollowResponseDto {
    private Long id;
    private Long followerId;
    private Long followeeId;
    private LocalDateTime createdAt;

    private String nickname;
    private String email;
    private String ufile;

    private boolean blocked; // ✅ 추가

    public static FollowResponseDto of(Follow follow, AppUser targetUser, boolean blocked) {
        FollowResponseDto dto = new FollowResponseDto();
        dto.id = follow.getId();
        dto.followerId = follow.getFollower().getId();
        dto.followeeId = follow.getFollowee().getId();
        dto.createdAt = follow.getCreatedAt();

        dto.nickname = targetUser.getNickname();
        dto.email = targetUser.getEmail();
        dto.ufile = targetUser.getUfile();

        dto.blocked = blocked;
        return dto;
    }
}

```

```java
package com.thejoa703.dto.response;

import lombok.Builder;
import lombok.Getter;

@Getter
@Builder
public class LikeResponseDto {
    private Long postId; // ✅ 게시글 ID
    private Long count;  // ✅ 현재 좋아요 수
}

```

```java
// src/main/java/com/thejoa703/dto/response/PostResponseDto.java
package com.thejoa703.dto.response;

import java.time.LocalDateTime;
import java.util.List;
import java.util.stream.Collectors;

import com.thejoa703.entity.Hashtag;
import com.thejoa703.entity.Image;
import com.thejoa703.entity.Post;

import lombok.Getter;
import lombok.Setter;

/**
 * 게시글 응답 DTO
 * - 작성자 ID(authorId) 포함
 * - 이미지, 해시태그, 좋아요/댓글 수, 작성일시, 리트윗 수 포함
 * - ✅ soft delete 상태(deleted) 포함하여 테스트/관리 용이성 확보
 *
 * 중요:
 * - DTO는 엔티티의 상태를 표현하는 용도로 사용됩니다.
 * - 테스트에서 setDeleted(boolean)을 호출하는 경우가 있어 deleted 필드를 추가했습니다.
 */
@Getter
@Setter
public class PostResponseDto {
    private Long id;                  // 게시글 ID
    private String content;           // 게시글 내용
    private String authorNickname;    // 작성자 닉네임
    private Long authorId;            // 작성자 ID
    private List<String> imageUrls;   // 이미지 URL 목록
    private List<String> hashtags;    // 해시태그 목록
    private int likeCount;            // 좋아요 수
    private int commentCount;         // 댓글 수
    private LocalDateTime createdAt;  // 작성일시
    private long retweetCount;        // 리트윗 수
    private boolean deleted;          // ✅ soft delete 상태

    /**
     * ✅ 엔티티 → DTO 변환
     * - 엔티티의 모든 주요 상태를 DTO에 반영
     * - deleted 상태 포함
     */
    public static PostResponseDto from(Post post) {
        PostResponseDto dto = new PostResponseDto();
        dto.setId(post.getId());
        dto.setContent(post.getContent());

        // 작성자 정보
        if (post.getUser() != null) {
            dto.setAuthorNickname(post.getUser().getNickname());
            dto.setAuthorId(post.getUser().getId());
        }

        // 이미지 URL 매핑
        dto.setImageUrls(
            post.getImages().stream()
                .map(Image::getSrc)
                .collect(Collectors.toList())
        );

        // 해시태그 매핑
        dto.setHashtags(
            post.getHashtags().stream()
                .map(Hashtag::getName)
                .collect(Collectors.toList())
        );

        // 좋아요/댓글 수
        dto.setLikeCount(post.getLikeCount());
        dto.setCommentCount(post.getCommentCount());

        // 작성일시
        dto.setCreatedAt(post.getCreatedAt());

        // soft delete 상태
        dto.setDeleted(post.isDeleted());

        // ✅ retweetCount는 Service에서 별도 세팅
        return dto;
    }

    /**
     * ✅ 래퍼 메서드 (서비스 코드에서 호출 용이)
     */
    public static PostResponseDto fromEntity(Post post) {
        return from(post);
    }
}

```

```java
package com.thejoa703.dto.response;

import lombok.Builder;
import lombok.Getter;
import java.time.LocalDateTime;

/**
 * ✅ 리트윗 응답 DTO
 * - 리트윗 ID, 유저 ID, 원본 게시글 ID, 생성 시점
 * - 리트윗 수 포함 (프론트에서 즉시 반영 가능)
 */
@Getter
@Builder
public class RetweetResponseDto {
    private Long id;
    private Long userId;
    private Long originalPostId;
    private LocalDateTime createdAt;
    private long retweetCount; // ✅ 변경: 리트윗 수 추가
    
}

```

```java
// src/main/java/com/thejoa703/dto/response/UserResponseDto.java
package com.thejoa703.dto.response;

import com.thejoa703.entity.AppUser;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;

/**
 * 사용자 응답 DTO
 * - 엔티티(AppUser) → DTO 변환용 정적 메서드 제공
 * - 필요 시 DTO → 엔티티 변환(toEntity)도 제공하여 테스트/매핑 유연성 확보
 *
 * 중요:
 * - 응답 DTO는 보통 읽기 전용이지만, 테스트에서 DTO→엔티티 변환을 요구하는 경우가 있어 toEntity()를 제공합니다.
 * - 비밀번호 등 민감정보는 응답 DTO에 포함하지 않습니다.
 */
@Getter
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class UserResponseDto {

    // ✅ 응답에 필요한 필드만 노출
    private Long id;
    private String email;
    private String nickname;
    private String provider;
    private String role;
    private java.time.LocalDateTime createdAt;
    private String ufile;

    /**
     * ✅ 엔티티 → DTO 변환
     * - 서비스/컨트롤러에서 안전하게 응답 생성
     */
    public static UserResponseDto fromEntity(AppUser user) {
        return UserResponseDto.builder()
                .id(user.getId())
                .email(user.getEmail())
                .nickname(user.getNickname())
                .provider(user.getProvider())
                .role(user.getRole())
                .createdAt(user.getCreatedAt())
                .ufile(user.getUfile())
                .build();
    }

    /**
     * ✅ DTO → 엔티티 변환
     * - 테스트나 특정 매핑 시 필요할 수 있어 제공
     * - 응답 DTO이므로 모든 필드를 채우지 않을 수 있음(주의)
     *
     * 설명:
     * - 보안상 응답 DTO에서 password를 다루지 않습니다.
     * - provider, role 등은 기본값을 설정하거나 null 허용합니다.
     */
    public AppUser toEntity() {
        AppUser user = new AppUser();
        user.setId(this.id);                 // 테스트에서 ID 매핑이 필요할 수 있음
        user.setEmail(this.email);
        user.setNickname(this.nickname);
        user.setProvider(this.provider != null ? this.provider : "local");
        user.setRole(this.role != null ? this.role : "ROLE_USER");
        user.setUfile(this.ufile);
        // createdAt은 엔티티 @PrePersist에서 자동 세팅되므로 여기서는 생략
        return user;
    }
}


```
 